(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{7366:function(e,t,a){"use strict";a.r(t);var r=a(9),l=a(10),o=a(12),s=a(11),i=a(13),n=(a(122),a(0)),c=a.n(n),d=a(566),m=a.n(d),u=a(1),f=a(75),g=a(5),p=(a(4),a(121)),h=a.n(p),b=a(289),x=a.n(b),_=(a(246),a(21)),E=a(25),v=(a(288),a(66)),y=a(19),P=a(16),k=a(7265),F=a(7249),O=a(54),N=a(7214),C=a(7213),S=(a(7261),{backgroundColor:"#faad63",fontSize:"18px"}),w=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).handleClickOpen=function(){a.setState({toggleDialog:!0})},a.handleClose=function(){a.props.closeDialog()},a.handlePageClick=function(e){a.props.getOrders(e.selected*a.state.recordsPerPage,a.state.recordsPerPage,a.props.match.params.id),a.setState({currentPage:e.selected})},a.deleteFormatter=function(e,t,r,l){return c.a.createElement(u.d,{bssize:"small",className:"btn-custom",onClick:function(){return a.onClickSliderDeleted(e,t,r)},icon:"delete",labelposition:"center"},c.a.createElement(u.E,{className:"mr-4 text-20"},"delete"))},a.detailFormatter=function(e,t,r,l){return c.a.createElement(u.d,{bssize:"small",className:"btn-custom",onClick:function(){a.onClickSliderDetail(e,t,r)},icon:"dehaze",labelposition:"center"},c.a.createElement(u.E,{className:"mr-4 text-20"},"dehaze"))},a.columns=[{text:"No",editable:!1,autoValue:!0,hidden:!0},{dataField:"order_id",isKey:!0,text:"Order #"},{dataField:"cust_name",text:"Customer Name"},{dataField:"cust_phone",text:"Customer Phone"},{dataField:"mobile_verified",text:"Mobile Verified?",formatter:a.verifiedFormatter,editable:!1},{dataField:"total_bill",text:"Total bill",formatter:a.priceFormatter},{dataField:"order_status",text:"Status",formatter:a.statusFormatter},{dataField:"detail",text:"Order Detail",isDummyField:!0,editable:!1,formatter:a.detailFormatter}],a.detailColumns=[{dataField:"no",text:"No",isKey:!0,editable:!1,autoValue:!0,hidden:!0,footer:"",footerStyle:S},{dataField:"item_image",text:"Item Image",formatter:a.imageFormatter,headerStyle:function(e,t){return{width:"250px"}},footerAlign:"center",footer:"Total",footerStyle:S},{dataField:"item_name",text:"Item Name",footer:"",footerStyle:S},{dataField:"item_sku",text:"Item Sku",footer:"",footerStyle:S},{dataField:"item_qty",text:"Item Quantity",footer:function(e){return e.reduce(function(e,t){return e+t},0)},footerStyle:S},{dataField:"item_price",text:"Item Price",formatter:a.priceFormatter,footer:"",footerStyle:S},{dataField:"item_total_price",text:"Total Price",formatter:a.priceFormatter,footer:function(e){return"Rs. "+e.reduce(function(e,t){return e+t},0)},footerStyle:S}],a.handleSearch=function(e){e.preventDefault();var t=document.getElementById("product_sku").value;""!==t&&(console.log(t,"id"),a.props.history.push("/apps/reports/product-report/"+t),a.props.getOrders(0,a.state.recordsPerPage,t))},a.state={all_ordersdata:[],order_detail:[],order_stats:{},misc:{},image:null,editSuccess:!1,toggleDialog:!1,pageCount:null,recordsPerPage:30,totalRecords:null,currentPage:0,totalBill:null},a}return Object(i.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.getOrders(0,this.state.recordsPerPage,e)}},{key:"imageFormatter",value:function(e,t){var a="".concat(E.a).concat(t.item_image);return c.a.createElement("img",{style:{width:"30%",textAlign:"center"},src:a,alt:""})}},{key:"statusFormatter",value:function(e,t){var a=t.order_status;return c.a.createElement(N.a,{flag:a})}},{key:"priceFormatter",value:function(e,t){return"Rs. ".concat(e)}},{key:"verifiedFormatter",value:function(e,t){return"unproved"===e?c.a.createElement(u.E,{className:"text-red text-20"},"remove_circle"):c.a.createElement(u.E,{className:"text-green text-20"},"check_circle")}},{key:"onClickSliderDeleted",value:function(e,t,a){var r=t.order_id;this.props.deleteOrder(r,this.state.currentPage*this.state.recordsPerPage,this.state.recordsPerPage)}},{key:"onClickSliderDetail",value:function(e,t,a){var r=t.order_id;this.props.getOrderDetails(r)}},{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.m,{header:c.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},c.a.createElement("div",{className:"flex flex-col items-start max-w-full"},c.a.createElement(g.a,{animation:"transition.slideLeftIn",delay:300},c.a.createElement(u.ib,{className:"normal-case flex items-center sm:mb-12",component:_.a,role:"button",to:"/apps/dashboards/analytics"},c.a.createElement(u.E,{className:"mr-4 text-20"},"arrow_back"),"Product Report")),c.a.createElement("div",{className:"flex items-center max-w-full"},c.a.createElement(g.a,{animation:"transition.expandIn",delay:300},c.a.createElement("img",{className:"w-32 sm:w-48 mr-8 sm:mr-16 rounded",src:"assets/images/component_icons/orders_white_24dp.png",alt:"{form.name}"})),c.a.createElement("div",{className:"flex flex-col min-w-0"},c.a.createElement(g.a,{animation:"transition.slideLeftIn",delay:300},c.a.createElement(u.ib,{className:"text-16 sm:text-20 truncate"},"All Orders")))))),content:c.a.createElement("div",{className:"md:flex max-w-3xl sm:p-24"},c.a.createElement("div",{className:"flex flex-col flex-1 md:pr-32"},c.a.createElement(C.a,{handleClose:this.handleClose,order_detail:this.state.order_detail,order_stats:this.state.order_stats,misc:this.state.misc,toggleDialog:this.state.toggleDialog}),c.a.createElement("p",null,"Total Record:"," ",c.a.createElement("span",{className:"font-weight-bold"},this.state.totalRecords)),c.a.createElement("p",null,"Total Bill:"," ",c.a.createElement("span",{className:"font-weight-bold"},"PKR. ",this.state.totalBill?this.state.totalBill:0)),c.a.createElement(g.b,{enter:{animation:"transition.slideUpBigIn"},className:"mt-4"},this.state.all_ordersdata&&c.a.createElement(x.a,{keyField:"order_id",data:this.state.all_ordersdata,columns:this.columns,search:!0},function(t){return c.a.createElement("div",{className:"flex flex-col flex-1"},c.a.createElement("form",{onSubmit:function(t){return e.handleSearch(t)}},c.a.createElement(u.G,{type:"text",id:"product_sku",outlined:!0,placeholder:"Enter Product Sku"})),c.a.createElement("hr",null),c.a.createElement(h.a,Object.assign({},t.baseProps,{classes:"table-responsive",striped:!0,bootstrap4:!0,borderless:!0,keyField:"order_id",hover:!0,overflow:"scroll",draggable:!1,noDataIndication:"Table is Empty"})))}),this.state.recordsPerPage<=this.state.totalRecords&&this.state.totalRecords&&c.a.createElement(m.a,{previousLabel:"Prev",nextLabel:"Next",breakLabel:"...",breakClassName:"break-me",pageCount:this.state.pageCount,onPageChange:this.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}))))}),c.a.createElement(O.a,{notificationToggle:this.state.notificationToggle||!1,notificationMsg:this.state.notificationMsg||"",variant:this.state.variant||"success"}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{all_ordersdata:e.all_ordersdata,pageCount:Math.ceil(e.totalRecords/t.recordsPerPage),totalRecords:e.totalRecords,totalBill:e.totalBill,toggleDialog:e.toggleDialog,order_detail:e.order_detail,order_stats:e.order_stats,misc:e.misc}}}]),t}(n.Component);t.default=Object(v.a)("allOrders",k.a)(Object(f.withStyles)({appBar:{position:"fixed"},flex:{flex:1},tableRow:{color:"black"}})(Object(y.a)(function(e){return console.log(e,"state"),{all_ordersdata:e.allOrders.orders.productData,totalRecords:e.allOrders.orders.totalProductRecords,totalBill:e.allOrders.orders.totalProductBill,order_detail:e.allOrders.orders.order_detail,order_stats:e.allOrders.orders.order_stats,misc:e.allOrders.orders.misc,toggleDialog:e.allOrders.orders.toggleDialog}},function(e){return Object(P.c)({getOrders:F.u,getUpdatedOrders:F.v,deleteOrder:F.r,getOrderDetails:F.s,closeDialog:F.q},e)})(w)))}}]);