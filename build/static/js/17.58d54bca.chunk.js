(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{7355:function(e,t,a){"use strict";a.r(t);var n=a(28),i=a(9),l=a(10),s=a(12),o=a(11),r=a(202),m=a(13),c=a(0),u=a.n(c),d=a(1),h=a(49),p=a.n(h),b=a(54),g=a(5),f=(a(246),a(21)),v=a(25),_=(a(288),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(o.a)(t).call(this,e))).fetchSettings=function(){var e=localStorage.getItem("jwtToken");fetch(v.a+"/api/admin/misc/general-settings/getAllSettings",{headers:{Authorization:"Bearer "+e}}).then(function(e){return e.json()}).then(function(e){if(!0===e.status){var t={support_email:e.data[0].setting_value,support_phone:e.data[1].setting_value,admin_email:e.data[2].setting_value,checkout_min_amount:e.data[3].setting_value};a.setState(t)}else b.b.call(Object(r.a)(a),e.msg,"error")}).catch(function(e){b.b.call(Object(r.a)(a),"Error communicating with server \n"+e.msg,"error")})},a.onSubmit=function(){var e=a.form.getModel(),t=e.support_email,n=e.admin_email,i=e.support_phone,l=e.checkout_min_amount,s=new FormData;s.append("support_email",t),s.append("admin_email",n),s.append("support_phone",i),s.append("checkout_min_amount",l);var o=localStorage.getItem("jwtToken");fetch(v.a+"/api/admin/misc/general-settings/setAllSettings",{method:"POST",headers:{Authorization:"Bearer "+o},body:s}).then(function(e){return e.json()}).then(function(e){!0===e.status?b.b.call(Object(r.a)(a),e.msg,"success"):b.b.call(Object(r.a)(a),e.msg,"error")}).catch(function(e){b.b.call(Object(r.a)(a),"Error communicating with server \n"+e.msg,"error")})},a.disableButton=function(){a.setState({canSubmit:!1})},a.enableButton=function(){a.setState({canSubmit:!0})},a.handleOnChange=function(e){a.setState(Object(n.a)({},"".concat(e.target.name),e.target.value))},a.state={canSubmit:!1,support_email:"",admin_email:"",support_phone:"",checkout_min_amount:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchSettings()}},{key:"render",value:function(){var e=this,t=this.state.canSubmit;return u.a.createElement(u.a.Fragment,null,u.a.createElement(g.m,{header:u.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},u.a.createElement("div",{className:"flex flex-col items-start max-w-full"},u.a.createElement(g.a,{animation:"transition.slideLeftIn",delay:300},u.a.createElement(d.ib,{className:"normal-case flex items-center sm:mb-12",component:f.a,role:"button",to:"/apps/dashboards/analytics"},u.a.createElement(d.E,{className:"mr-4 text-20"},"arrow_back"),"Dashboard")),u.a.createElement("div",{className:"flex items-center max-w-full"},u.a.createElement(g.a,{animation:"transition.expandIn",delay:300},u.a.createElement("img",{className:"w-32 sm:w-48 mr-8 sm:mr-16 rounded",src:"assets/images/component_icons/general_settings_white_24dp.png",alt:"{form.name}"})),u.a.createElement("div",{className:"flex flex-col min-w-0"},u.a.createElement(g.a,{animation:"transition.slideLeftIn",delay:300},u.a.createElement(d.ib,{className:"text-16 sm:text-20 truncate"},"General Settings")))))),content:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:" m-auto flex flex-col p-20 max-w-md"},u.a.createElement(d.ib,{className:"h2 mb-24"},"Update Settings"),u.a.createElement(p.a,{onValidSubmit:this.onSubmit,onValid:this.enableButton,onInvalid:this.disableButton,ref:function(t){return e.form=t},className:"flex flex-col justify-center"},u.a.createElement(g.w,{type:"email",name:"support_email",autoComplete:"email",label:"Support Email",placeholder:"abc@xyz.com",onChange:this.handleOnChange,variant:"outlined",validations:"isEmail",validationError:"This is not a valid email",required:!0,value:this.state.support_email}),u.a.createElement(g.w,{className:"my-12",type:"email",onChange:this.handleOnChange,name:"admin_email",autoComplete:"email",label:"Admin Email",placeholder:"abc@xyz.com",variant:"outlined",validations:"isEmail",validationError:"This is not a valid email",required:!0,value:this.state.admin_email}),u.a.createElement(g.w,{className:"mb-16",type:"text",onChange:this.handleOnChange,name:"support_phone",label:"Support Phone",placeholder:"0123-1234567",validations:"isNumeric",validationError:"The phone number must be in number format",variant:"outlined",required:!0,value:this.state.support_phone}),u.a.createElement(g.w,{className:"mb-16",type:"number",onChange:this.handleOnChange,name:"checkout_min_amount",label:"Delivery Charges",variant:"outlined",required:!0,value:this.state.checkout_min_amount}),u.a.createElement(d.d,{type:"submit",variant:"contained",color:"primary",className:"mx-auto my-16 md-2","aria-label":"LOG IN",disabled:!t},"UPDATE"))),u.a.createElement(b.a,{notificationToggle:this.state.notificationToggle||!1,notificationMsg:this.state.notificationMsg||"",variant:this.state.variant||"success"}))}))}}]),t}(c.Component));t.default=_}}]);